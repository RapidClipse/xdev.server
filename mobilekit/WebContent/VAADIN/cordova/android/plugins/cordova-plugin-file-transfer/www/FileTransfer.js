cordova.define("cordova-plugin-file-transfer.FileTransfer",function(e,r,n){function o(e){var r=new d;return r.lengthComputable=e.lengthComputable,r.loaded=e.loaded,r.total=e.total,r}function a(e){var r=/^https?\:\/\/(?:(?:(([^:@\/]*)(?::([^@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?).*$/,n=r.exec(e);return n&&n[1]}function t(e){var r=null;if(window.btoa){var n=a(e);if(n){var o="Authorization",t="Basic "+window.btoa(n);r={name:o,value:t}}}return r}function i(e){var r=[];for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];r.push({name:n,value:o+""})}return r}var l=e("cordova/argscheck"),s=e("cordova/exec"),u=e("./FileTransferError"),d=e("cordova-plugin-file.ProgressEvent"),c=0,p=function(){this._id=++c,this.onprogress=null};p.prototype.upload=function(e,r,n,d,c,p){l.checkArgs("ssFFO*","FileTransfer.upload",arguments);var f=null,h=null,v=null,m=null,g=!0,w=null,y=null,F=t(r);F&&(r=r.replace(a(r)+"@",""),c=c||{},c.headers=c.headers||{},c.headers[F.name]=F.value),c&&(f=c.fileKey,h=c.fileName,v=c.mimeType,w=c.headers,y=c.httpMethod||"POST",y=y.toUpperCase()=="PUT"?"PUT":"POST",(c.chunkedMode!==null||c.chunkedMode!==void 0)&&(g=c.chunkedMode),m=c.params?c.params:{}),cordova.platformId==="windowsphone"&&(w=w&&i(w),m=m&&i(m));var T=d&&function(e){var r=new u(e.code,e.source,e.target,e.http_status,e.body,e.exception);d(r)},b=this,P=function(e){e.lengthComputable!==void 0?b.onprogress&&b.onprogress(o(e)):n&&n(e)};s(P,T,"FileTransfer","upload",[e,r,f,h,v,m,p,g,w,this._id,y])},p.prototype.download=function(r,n,d,c,p,f){l.checkArgs("ssFF*","FileTransfer.download",arguments);var h=this,v=t(r);v&&(r=r.replace(a(r)+"@",""),f=f||{},f.headers=f.headers||{},f.headers[v.name]=v.value);var m=null;f&&(m=f.headers||null),cordova.platformId==="windowsphone"&&m&&(m=i(m));var g=function(r){if(r.lengthComputable!==void 0){if(h.onprogress)return h.onprogress(o(r))}else if(d){var n=null;r.isDirectory?n=new e("cordova-plugin-file.DirectoryEntry"):r.isFile&&(n=new e("cordova-plugin-file.FileEntry")),n.isDirectory=r.isDirectory,n.isFile=r.isFile,n.name=r.name,n.fullPath=r.fullPath,n.filesystem=new FileSystem(r.filesystemName||(r.filesystem==window.PERSISTENT?"persistent":"temporary")),n.nativeURL=r.nativeURL,d(n)}},w=c&&function(e){var r=new u(e.code,e.source,e.target,e.http_status,e.body,e.exception);c(r)};s(g,w,"FileTransfer","download",[r,n,p,this._id,m])},p.prototype.abort=function(){s(null,null,"FileTransfer","abort",[this._id])},n.exports=p})