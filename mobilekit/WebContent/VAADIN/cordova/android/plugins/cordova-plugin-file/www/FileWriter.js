cordova.define("cordova-plugin-file.FileWriter",function(t,e,r){var n=t("cordova/exec"),o=t("./FileError"),i=t("./ProgressEvent"),a=function(t){this.fileName="",this.length=0,t&&(this.localURL=t.localURL||t,this.length=t.size||0),this.position=0,this.readyState=0,this.result=null,this.error=null,this.onwritestart=null,this.onprogress=null,this.onwrite=null,this.onwriteend=null,this.onabort=null,this.onerror=null};a.INIT=0,a.WRITING=1,a.DONE=2,a.prototype.abort=function(){if(this.readyState===a.DONE||this.readyState===a.INIT)throw new o(o.INVALID_STATE_ERR);this.error=new o(o.ABORT_ERR),this.readyState=a.DONE,typeof this.onabort=="function"&&this.onabort(new i("abort",{target:this})),typeof this.onwriteend=="function"&&this.onwriteend(new i("writeend",{target:this}))},a.prototype.write=function(t,e){var r,s=this,w=window.Blob!==void 0&&window.ArrayBuffer!==void 0,d=cordova.platformId==="windows8"||cordova.platformId==="windows";if(t instanceof File||!d&&w&&t instanceof Blob){var f=new FileReader;return f.onload=function(){a.prototype.write.call(s,this.result,!0)},f.onerror=function(){s.readyState=a.DONE,s.error=this.error,typeof s.onerror=="function"&&s.onerror(new i("error",{target:s})),typeof s.onwriteend=="function"&&s.onwriteend(new i("writeend",{target:s}))},this.readyState=a.WRITING,w?f.readAsArrayBuffer(t):f.readAsText(t),void 0}if(r=w&&t instanceof ArrayBuffer,r&&cordova.platformId==="windowsphone"&&(t=Array.apply(null,new Uint8Array(t))),this.readyState===a.WRITING&&!e)throw new o(o.INVALID_STATE_ERR);this.readyState=a.WRITING;var h=this;typeof h.onwritestart=="function"&&h.onwritestart(new i("writestart",{target:h})),n(function(t){h.readyState!==a.DONE&&(h.position+=t,h.length=h.position,h.readyState=a.DONE,typeof h.onwrite=="function"&&h.onwrite(new i("write",{target:h})),typeof h.onwriteend=="function"&&h.onwriteend(new i("writeend",{target:h})))},function(t){h.readyState!==a.DONE&&(h.readyState=a.DONE,h.error=new o(t),typeof h.onerror=="function"&&h.onerror(new i("error",{target:h})),typeof h.onwriteend=="function"&&h.onwriteend(new i("writeend",{target:h})))},"File","write",[this.localURL,t,this.position,r])},a.prototype.seek=function(t){if(this.readyState===a.WRITING)throw new o(o.INVALID_STATE_ERR);(t||t===0)&&(this.position=0>t?Math.max(t+this.length,0):t>this.length?this.length:t)},a.prototype.truncate=function(t){if(this.readyState===a.WRITING)throw new o(o.INVALID_STATE_ERR);this.readyState=a.WRITING;var e=this;typeof e.onwritestart=="function"&&e.onwritestart(new i("writestart",{target:this})),n(function(t){e.readyState!==a.DONE&&(e.readyState=a.DONE,e.length=t,e.position=Math.min(e.position,t),typeof e.onwrite=="function"&&e.onwrite(new i("write",{target:e})),typeof e.onwriteend=="function"&&e.onwriteend(new i("writeend",{target:e})))},function(t){e.readyState!==a.DONE&&(e.readyState=a.DONE,e.error=new o(t),typeof e.onerror=="function"&&e.onerror(new i("error",{target:e})),typeof e.onwriteend=="function"&&e.onwriteend(new i("writeend",{target:e})))},"File","truncate",[this.localURL,t])},r.exports=a})