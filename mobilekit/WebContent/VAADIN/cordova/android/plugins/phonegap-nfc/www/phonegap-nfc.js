cordova.define("phonegap-nfc.NFC",function(){"use strict";function e(){(cordova.platformId==="android"||cordova.platformId==="windows")&&setTimeout(function(){cordova.exec(function(){console.log("Initialized the NfcPlugin")},function(e){console.log("Failed to initialize the NfcPlugin "+e)},"NfcPlugin","init",[])},10)}function n(e,n){setTimeout(function(){var t=document.createEvent("Events");t.initEvent(e,!0,!1),t.tag=JSON.parse(n),console.log(t.tag),document.dispatchEvent(t)},10)}document.addEventListener("deviceready",e,!1);var t={TNF_EMPTY:0,TNF_WELL_KNOWN:1,TNF_MIME_MEDIA:2,TNF_ABSOLUTE_URI:3,TNF_EXTERNAL_TYPE:4,TNF_UNKNOWN:5,TNF_UNCHANGED:6,TNF_RESERVED:7,RTD_TEXT:[84],RTD_URI:[85],RTD_SMART_POSTER:[83,112],RTD_ALTERNATIVE_CARRIER:[97,99],RTD_HANDOVER_CARRIER:[72,99],RTD_HANDOVER_REQUEST:[72,114],RTD_HANDOVER_SELECT:[72,115],record:function(e,n,o,i){return e||(e=t.TNF_EMPTY),n||(n=[]),o||(o=[]),i||(i=[]),n instanceof Array||(n=r.stringToBytes(n)),o instanceof Array||(o=r.stringToBytes(o)),i instanceof Array||(i=r.stringToBytes(i)),{tnf:e,type:n,id:o,payload:i}},textRecord:function(e,n,r){var o=i.encodePayload(e,n);return r||(r=[]),t.record(t.TNF_WELL_KNOWN,t.RTD_TEXT,r,o)},uriRecord:function(e,n){var r=c.encodePayload(e);return n||(n=[]),t.record(t.TNF_WELL_KNOWN,t.RTD_URI,n,r)},absoluteUriRecord:function(e,n,r){return r||(r=[]),n||(n=[]),t.record(t.TNF_ABSOLUTE_URI,e,r,n)},mimeMediaRecord:function(e,n,o){return o||(o=[]),t.record(t.TNF_MIME_MEDIA,r.stringToBytes(e),o,n)},smartPoster:function(e,n){var r=[];return n||(n=[]),e?r=e[0]instanceof Object&&e[0].hasOwnProperty("tnf")?t.encodeMessage(e):e:console.log("WARNING: Expecting an array of NDEF records"),t.record(t.TNF_WELL_KNOWN,t.RTD_SMART_POSTER,n,r)},emptyRecord:function(){return t.record(t.TNF_EMPTY,[],[],[])},androidApplicationRecord:function(e){return t.record(t.TNF_EXTERNAL_TYPE,"android.com:pkg",[],e)},encodeMessage:function(e){var n,r,o,i,c,a,d,s,f,u=[],l=!1;for(c=0;e.length>c;c++)a=c===0,d=c===e.length-1,s=255>e[c].payload.length,f=e[c].id.length>0,n=t.encodeTnf(a,d,l,s,f,e[c].tnf),u.push(n),r=e[c].type.length,u.push(r),s?(o=e[c].payload.length,u.push(o)):(o=e[c].payload.length,u.push(o>>24),u.push(o>>16),u.push(o>>8),u.push(o&255)),f&&(i=e[c].id.length,u.push(i)),u=u.concat(e[c].type),f&&(u=u.concat(e[c].id)),u=u.concat(e[c].payload);return u},decodeMessage:function(e){var n,r,e=e.slice(0),o=[],i=0,c=0,a=0,d=[],s=[],f=[];while(e.length)if(n=e.shift(),r=t.decodeTnf(n),i=e.shift(),c=r.sr?e.shift():(255&e.shift())<<24|(255&e.shift())<<26|(255&e.shift())<<8|255&e.shift(),r.il&&(a=e.shift()),d=e.splice(0,i),s=e.splice(0,a),f=e.splice(0,c),o.push(t.record(r.tnf,d,s,f)),r.me)break;return o},decodeTnf:function(e){return{mb:(e&128)!==0,me:(e&64)!==0,cf:(e&32)!==0,sr:(e&16)!==0,il:(e&8)!==0,tnf:e&7}},encodeTnf:function(e,n,t,r,o,i){var c=i;return e&&(c|=128),n&&(c|=64),t&&(c|=32),r&&(c|=16),o&&(c|=8),c},tnfToString:function(e){var n=e;switch(e){case t.TNF_EMPTY:n="Empty";break;case t.TNF_WELL_KNOWN:n="Well Known";break;case t.TNF_MIME_MEDIA:n="Mime Media";break;case t.TNF_ABSOLUTE_URI:n="Absolute URI";break;case t.TNF_EXTERNAL_TYPE:n="External";break;case t.TNF_UNKNOWN:n="Unknown";break;case t.TNF_UNCHANGED:n="Unchanged";break;case t.TNF_RESERVED:n="Reserved"}return n}},r={addTagDiscoveredListener:function(e,n,t){document.addEventListener("tag",e,!1),cordova.exec(n,t,"NfcPlugin","registerTag",[])},addMimeTypeListener:function(e,n,t,r){document.addEventListener("ndef-mime",n,!1),cordova.exec(t,r,"NfcPlugin","registerMimeType",[e])},addNdefListener:function(e,n,t){document.addEventListener("ndef",e,!1),cordova.exec(n,t,"NfcPlugin","registerNdef",[])},addNdefFormatableListener:function(e,n,t){document.addEventListener("ndef-formatable",e,!1),cordova.exec(n,t,"NfcPlugin","registerNdefFormatable",[])},write:function(e,n,t){cordova.exec(n,t,"NfcPlugin","writeTag",[e])},makeReadOnly:function(e,n){cordova.exec(e,n,"NfcPlugin","makeReadOnly",[])},share:function(e,n,t){cordova.exec(n,t,"NfcPlugin","shareTag",[e])},unshare:function(e,n){cordova.exec(e,n,"NfcPlugin","unshareTag",[])},handover:function(e,n,t){Array.isArray(e)||(e=[e]),cordova.exec(n,t,"NfcPlugin","handover",e)},stopHandover:function(e,n){cordova.exec(e,n,"NfcPlugin","stopHandover",[])},erase:function(e,n){cordova.exec(e,n,"NfcPlugin","eraseTag",[[]])},enabled:function(e,n){cordova.exec(e,n,"NfcPlugin","enabled",[[]])},removeTagDiscoveredListener:function(e,n,t){document.removeEventListener("tag",e,!1),cordova.exec(n,t,"NfcPlugin","removeTag",[])},removeMimeTypeListener:function(e,n,t,r){document.removeEventListener("ndef-mime",n,!1),cordova.exec(t,r,"NfcPlugin","removeMimeType",[e])},removeNdefListener:function(e,n,t){document.removeEventListener("ndef",e,!1),cordova.exec(n,t,"NfcPlugin","removeNdef",[])},showSettings:function(e,n){cordova.exec(e,n,"NfcPlugin","showSettings",[])}},o={toHex:function(e){var n;return 0>e&&(e+=256),n=e.toString(16),n.length===1&&(n="0"+n),n},toPrintable:function(e){return e>=32&127>=e?String.fromCharCode(e):"."},bytesToString:function(e){var n,t,r,o,i,c="";n=t=r=o=i=0,3>e.length||(e[0]&239)==239&&(e[1]&187)==187&&(e[2]&191)==191&&(n=3);while(e.length>n)if(t=e[n]&255,128>t)c+=String.fromCharCode(t),n++;else if(t>191&&224>t){if(n+1>=e.length)throw"Un-expected encoding error, UTF-8 stream truncated, or incorrect";o=e[n+1]&255,c+=String.fromCharCode((t&31)<<6|o&63),n+=2}else{if(n+2>=e.length||n+1>=e.length)throw"Un-expected encoding error, UTF-8 stream truncated, or incorrect";o=e[n+1]&255,i=e[n+2]&255,c+=String.fromCharCode((t&15)<<12|(o&63)<<6|i&63),n+=3}return c},stringToBytes:function(e){for(var n=[],t=0;e.length>t;t++){var r=e.charCodeAt(t);128>r?n[n.length]=r:r>127&&2048>r?(n[n.length]=r>>6|192,n[n.length]=r&63|128):(n[n.length]=r>>12|224,n[n.length]=r>>6&63|128,n[n.length]=r&63|128)}return n},bytesToHexString:function(e){for(var n,t,r="",o=0;e.length>o;o++)n=0>e[o]?256+e[o]:e[o],t=n.toString(16),t.length===1&&(t="0"+t),r+=t;return r},isType:function(e,n,t){if(e.tnf===n){var o;return o=typeof t=="string"?t:r.bytesToString(t),r.bytesToString(e.type)===o}return!1}},i={decodePayload:function(e){var n=e[0]&31;return e.slice(1,1+n),(e[0]&128)!==0,o.bytesToString(e.slice(n+1))},encodePayload:function(e,n){n||(n="en");var t=o.stringToBytes(n+e);return t.unshift(n.length),t}},c={protocols:["","http://www.","https://www.","http://","https://","tel:","mailto:","ftp://anonymous:anonymous@","ftp://ftp.","ftps://","sftp://","smb://","nfs://","ftp://","dav://","news:","telnet://","imap:","rtsp://","urn:","pop:","sip:","sips:","tftp:","btspp://","btl2cap://","btgoep://","tcpobex://","irdaobex://","file://","urn:epc:id:","urn:epc:tag:","urn:epc:pat:","urn:epc:raw:","urn:epc:","urn:nfc:"],decodePayload:function(e){var n=c.protocols[e[0]];return n||(n=""),n+o.bytesToString(e.slice(1))},encodePayload:function(e){var n,t,r;return c.protocols.slice(1).forEach(function(t){n&&n!=="urn:"||e.indexOf(t)!==0||(n=t)}),n||(n=""),r=o.stringToBytes(e.slice(n.length)),t=c.protocols.indexOf(n),r.unshift(t),r}};t.uriHelper=c,t.textHelper=i,r.bytesToString=o.bytesToString,r.stringToBytes=o.stringToBytes,r.bytesToHexString=o.bytesToHexString,window.nfc=r,window.ndef=t,window.util=o,window.fireNfcTagEvent=n})