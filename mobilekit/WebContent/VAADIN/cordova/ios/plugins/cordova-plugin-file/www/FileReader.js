cordova.define("cordova-plugin-file.FileReader",function(t,r,e){function s(t){d.defineGetterSetter(f.prototype,t,function(){return this._realReader[t]||null},function(r){this._realReader[t]=r})}function i(t,r){if(t.readyState==f.LOADING)throw new h(h.INVALID_STATE_ERR);return t._result=null,t._error=null,t._progress=0,t._readyState=f.LOADING,typeof r.localURL!="string"?(t._localURL="",!0):(t._localURL=r.localURL,t.onloadstart&&t.onloadstart(new u("loadstart",{target:t})),void 0)}function o(t,r,e,s,i,l){if(this._readyState!==f.DONE)if(l!==void 0&&(i(l),this._progress=Math.min(this._progress+f.READ_CHUNK_SIZE,s),typeof this.onprogress=="function"&&this.onprogress(new u("progress",{loaded:this._progress,total:s}))),l===void 0||s>this._progress){var d=[this._localURL,e+this._progress,e+this._progress+Math.min(s-this._progress,f.READ_CHUNK_SIZE)];r&&d.splice(1,0,r),a(o.bind(this,t,r,e,s,i),n.bind(this),"File",t,d)}else this._readyState=f.DONE,typeof this.onload=="function"&&this.onload(new u("load",{target:this})),typeof this.onloadend=="function"&&this.onloadend(new u("loadend",{target:this}))}function n(t){this._readyState!==f.DONE&&(this._readyState=f.DONE,this._result=null,this._error=new h(t),typeof this.onerror=="function"&&this.onerror(new u("error",{target:this})),typeof this.onloadend=="function"&&this.onloadend(new u("loadend",{target:this})))}var a=t("cordova/exec"),l=t("cordova/modulemapper"),d=t("cordova/utils"),h=t("./FileError"),u=t("./ProgressEvent"),_=l.getOriginalSymbol(window,"FileReader"),f=function(){this._readyState=0,this._error=null,this._result=null,this._progress=null,this._localURL="",this._realReader=_?new _:{}};f.READ_CHUNK_SIZE=262144,f.EMPTY=0,f.LOADING=1,f.DONE=2,d.defineGetter(f.prototype,"readyState",function(){return this._localURL?this._readyState:this._realReader.readyState}),d.defineGetter(f.prototype,"error",function(){return this._localURL?this._error:this._realReader.error}),d.defineGetter(f.prototype,"result",function(){return this._localURL?this._result:this._realReader.result}),s("onloadstart"),s("onprogress"),s("onload"),s("onerror"),s("onloadend"),s("onabort"),f.prototype.abort=function(){return _&&!this._localURL?this._realReader.abort():(this._result=null,this._readyState!=f.DONE&&this._readyState!=f.EMPTY&&(this._readyState=f.DONE,typeof this.onabort=="function"&&this.onabort(new u("abort",{target:this})),typeof this.onloadend=="function"&&this.onloadend(new u("loadend",{target:this}))),void 0)},f.prototype.readAsText=function(t,r){if(i(this,t))return this._realReader.readAsText(t,r);var e=r?r:"UTF-8",s=t.end-t.start;o.bind(this)("readAsText",e,t.start,s,function(t){this._progress===0&&(this._result=""),this._result+=t}.bind(this))},f.prototype.readAsDataURL=function(t){if(i(this,t))return this._realReader.readAsDataURL(t);var r=t.end-t.start;o.bind(this)("readAsDataURL",null,t.start,r,function(t){var r=t.indexOf(",");this._progress===0?this._result=t:this._result+=t.substring(r+1)}.bind(this))},f.prototype.readAsBinaryString=function(t){if(i(this,t))return this._realReader.readAsBinaryString(t);var r=t.end-t.start;o.bind(this)("readAsBinaryString",null,t.start,r,function(t){this._progress===0&&(this._result=""),this._result+=t}.bind(this))},f.prototype.readAsArrayBuffer=function(t){if(i(this,t))return this._realReader.readAsArrayBuffer(t);var r=t.end-t.start;o.bind(this)("readAsArrayBuffer",null,t.start,r,function(t){var e=this._progress===0?new Uint8Array(r):new Uint8Array(this._result);e.set(new Uint8Array(t),this._progress),this._result=e.buffer}.bind(this))},e.exports=f})