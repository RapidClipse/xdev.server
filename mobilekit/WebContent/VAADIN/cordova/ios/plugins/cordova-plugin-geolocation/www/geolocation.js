cordova.define("cordova-plugin-geolocation.geolocation",function(t,e,i){function o(t){var e={maximumAge:0,enableHighAccuracy:!1,timeout:1/0};return t&&(t.maximumAge!==void 0&&!isNaN(t.maximumAge)&&t.maximumAge>0&&(e.maximumAge=t.maximumAge),t.enableHighAccuracy!==void 0&&(e.enableHighAccuracy=t.enableHighAccuracy),t.timeout===void 0||isNaN(t.timeout)||(e.timeout=0>t.timeout?0:t.timeout)),e}function a(t,e){var i=setTimeout(function(){clearTimeout(i),i=null,t({code:r.TIMEOUT,message:"Position retrieval timed out."})},e);return i}var c=t("cordova/argscheck"),n=t("cordova/utils"),u=t("cordova/exec"),r=t("./PositionError"),m=t("./Position"),l={},s={lastPosition:null,getCurrentPosition:function(t,e,i){c.checkArgs("fFO","geolocation.getCurrentPosition",arguments),i=o(i);var n={timer:null},l=function(e){if(clearTimeout(n.timer),n.timer){var i=new m({latitude:e.latitude,longitude:e.longitude,altitude:e.altitude,accuracy:e.accuracy,heading:e.heading,velocity:e.velocity,altitudeAccuracy:e.altitudeAccuracy},e.timestamp);s.lastPosition=i,t(i)}},g=function(t){clearTimeout(n.timer),n.timer=null;var i=new r(t.code,t.message);e&&e(i)};return s.lastPosition&&i.maximumAge&&i.maximumAge>=(new Date).getTime()-s.lastPosition.timestamp?t(s.lastPosition):i.timeout===0?g({code:r.TIMEOUT,message:"timeout value in PositionOptions set to 0 and no cached Position object available, or cached Position object's age exceeds provided PositionOptions' maximumAge parameter."}):(n.timer=i.timeout!==1/0?a(g,i.timeout):!0,u(l,g,"Geolocation","getLocation",[i.enableHighAccuracy,i.maximumAge])),n},watchPosition:function(t,e,i){c.checkArgs("fFO","geolocation.getCurrentPosition",arguments),i=o(i);var g=n.createUUID();l[g]=s.getCurrentPosition(t,e,i);var d=function(t){clearTimeout(l[g].timer);var i=new r(t.code,t.message);e&&e(i)},v=function(e){clearTimeout(l[g].timer),i.timeout!==1/0&&(l[g].timer=a(d,i.timeout));var o=new m({latitude:e.latitude,longitude:e.longitude,altitude:e.altitude,accuracy:e.accuracy,heading:e.heading,velocity:e.velocity,altitudeAccuracy:e.altitudeAccuracy},e.timestamp);s.lastPosition=o,t(o)};return u(v,d,"Geolocation","addWatch",[g,i.enableHighAccuracy]),g},clearWatch:function(t){t&&l[t]!==void 0&&(clearTimeout(l[t].timer),l[t].timer=!1,u(null,null,"Geolocation","clearWatch",[t]))}};i.exports=s})