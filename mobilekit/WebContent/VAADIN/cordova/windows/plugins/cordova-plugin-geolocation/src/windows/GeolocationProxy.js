cordova.define("cordova-plugin-geolocation.GeolocationProxy",function(o,e,t){function i(){var o,e=new Windows.Devices.Geolocation.Geolocator;return o=typeof Windows.Devices.Geolocation.Geolocator.requestAccessAsync=="function"?Windows.Devices.Geolocation.Geolocator.requestAccessAsync().then(function(o){return o===Windows.Devices.Geolocation.GeolocationAccessStatus.allowed?e:WinJS.Promise.wrapError({code:c.PERMISSION_DENIED,message:"Geolocation access has not been allowed by user."})}):WinJS.Promise.wrap(e)}function n(o){switch(o.locationStatus){case Windows.Devices.Geolocation.PositionStatus.initializing:case Windows.Devices.Geolocation.PositionStatus.noData:case Windows.Devices.Geolocation.PositionStatus.notInitialized:case Windows.Devices.Geolocation.PositionStatus.notAvailable:return c.POSITION_UNAVAILABLE;case Windows.Devices.Geolocation.PositionStatus.disabled:return c.PERMISSION_DENIED;default:}}function a(o){var e={accuracy:o.coordinate.accuracy,heading:o.coordinate.heading,velocity:o.coordinate.speed,altitudeAccuracy:o.coordinate.altitudeAccuracy,timestamp:o.coordinate.timestamp};return o.coordinate.point?(e.latitude=o.coordinate.point.position.latitude,e.longitude=o.coordinate.point.position.longitude,e.altitude=o.coordinate.point.position.altitude):(e.latitude=o.coordinate.latitude,e.longitude=o.coordinate.longitude,e.altitude=o.coordinate.altitude),e}var c=o("./PositionError"),s={},r={},d=.001;t.exports={getLocation:function(o,e,t){i().done(function(i){if(i){var s=t[0],r=t[1];i.desiredAccuracy=s?Windows.Devices.Geolocation.PositionAccuracy.high:Windows.Devices.Geolocation.PositionAccuracy.default,i.reportInterval=r?r:0,i.getGeopositionAsync().then(function(e){o(a(e))},function(o){e({code:n(i),message:o.message})})}else e({code:c.POSITION_UNAVAILABLE,message:"You do not have the required location services present on your system."})},e)},addWatch:function(o,e,t){i().done(function(i){var n=t[0],u=t[1],l=function(e){o(a(e.position),{keepCallback:!0})},v=function(o){switch(o.status){case Windows.Devices.Geolocation.PositionStatus.noData:case Windows.Devices.Geolocation.PositionStatus.notAvailable:e({code:c.POSITION_UNAVAILABLE,message:"Data from location services is currently unavailable or you do not have the required location services present on your system."});break;case Windows.Devices.Geolocation.PositionStatus.disabled:e({code:c.PERMISSION_DENIED,message:"Your location is currently turned off."});break;default:}};i.desiredAccuracy=u?Windows.Devices.Geolocation.PositionAccuracy.high:Windows.Devices.Geolocation.PositionAccuracy.default,cordova.platformId=="windows"&&(i.movementThreshold=Number.EPSILON?Number.EPSILON:d),i.addEventListener("positionchanged",l),i.addEventListener("statuschanged",v),s[n]={pos:l,status:v},r[n]=i},e)},clearWatch:function(o,e,t){var i=t[0],n=s[i],a=r[i];n&&a&&(a.removeEventListener("positionchanged",n.pos),a.removeEventListener("statuschanged",n.status),delete s[i],delete r[i]),o()}},o("cordova/exec/proxy").add("Geolocation",t.exports)})